<!-- theme/templates/menu_sidebar.html -->

<!-- Sidebar Toggle Button -->
<div
  id="sidebar-button"
  style="
    position: fixed;
    top: 50%;
    right: 0;
    transform: translateY(-50%);
    cursor: pointer;
    z-index: 50;
    width: 25px;
    height: 172px;
    display: flex;
    align-items: center;
    justify-content: center;
  "
>
  <!-- Single tab (light grey). 
       If you want hover color, that will need CSS (not possible with inline only). -->
  <svg
    width="25"
    height="172"
    viewBox="0 0 25 172"
    xmlns="http://www.w3.org/2000/svg"
    preserveAspectRatio="none"
  >
    <path
      opacity="0.88"
      d="M0 25C0 18.4864 0 15.2295 0.833095 12.5873C2.59907 6.98634 6.98634 2.59907 12.5873 0.833095C15.2295 0 18.4864 0 25 0V0V172V172C18.4864 172 15.2295 172 12.5873 171.167C6.98634 169.401 2.59907 165.014 0.833095 159.413C0 156.77 0 153.514 0 147V25Z"
      fill="#D9D9D9"
    />
    <path
      d="M7.825 87L13.425 92.6L12 94L4 86L12 78L13.425 79.4L7.825 85H20V87H7.825Z"
      fill="#1D1B20"
    />
  </svg>
</div>

<!-- Order Sidebar Panel -->
<div
  id="order-sidebar"
  style="
    position: fixed;
    top: 64px;
    right: 0;
    width: 400px;
    height: calc(100vh - 64px);
    background-color: #ffffff;
    border-radius: 10px 0 0 10px;
    box-shadow: -4px 4px 8px rgba(0, 0, 0, 0.25);
    z-index: 40;
    transform: translateX(100%);
    transition: transform 260ms cubic-bezier(.2,.8,.2,1);
    display: flex;
    flex-direction: column;
  "
>
  <div style="flex:1 1 auto; display:flex; flex-direction:column; height:100%; padding:20px; box-sizing:border-box;">

    <!-- Header -->
    <div style="flex:0 0 auto; margin-bottom:12px;">
      <p style="font-size:24px; font-weight:700; color:#000; margin:0 0 8px 0;">Your Order</p>
    </div>

    <!-- Order type selector (CSS class based: active button gets gradient) -->
    <style>
      /* Scoped styles for the sidebar order-type control */
      #order-type-wrapper {
        position: relative;
        display: flex;
        width: 100%;
        border-radius: 9999px;
        background: #fff;
        border: 1px solid #969696;
        padding: 0;
        box-sizing: border-box;
        overflow: hidden;
      }
      #order-type-wrapper .order-type-btn {
        flex: 1;
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 8px 12px;
        border: none;
        background: transparent;
        color: #000;
        font-size: 14px;
        font-weight: 500;
        cursor: pointer;
        transition: color 140ms ease, box-shadow 140ms ease;
        position: relative;
        z-index: 3; /* keep above slider so text is readable */
        border-radius: 9999px; /* ensure each button can form a pill on hover */
        overflow: visible;
      }

      /* Hover is implemented by the dedicated `#order-type-hover` element (JS moves it).
         Remove pseudo-element approach to avoid stacking/pixel-cover issues that hide text. */
      #order-type-wrapper .order-type-btn:hover:not(.active) { color: #000 !important; }

      /* active state: gradient shown by the slider behind the button; keep text white */
      #order-type-wrapper .order-type-btn.active {
        color: #ffffff;
        box-shadow: 0 6px 12px rgba(239,68,68,0.12);
      }

      /* slider should sit above the hover pseudo-element but below button text */
      #order-type-slider { z-index: 2; }
    </style>

      <div style="margin-bottom:12px;">
      <div id="order-type-wrapper">
        <!-- Hover layer (light gray pill) - shown on hover of non-active buttons -->
        <div id="order-type-hover" style="position:absolute; top:0; bottom:0; left:0; width:33.3333%; border-radius:9999px; background:#f7f7f9; opacity:0; transition:transform 180ms ease, opacity 180ms ease; z-index:1; pointer-events:none;"></div>

        <!-- Absolute slider element (behind buttons) to match main menu pill selector -->
        <div id="order-type-slider" style="position:absolute; top:0; bottom:0; left:0; width:33.3333%; border-radius:9999px; background:linear-gradient(to right,#ff8e47,#ff4747); transition:transform 260ms cubic-bezier(.2,.8,.2,1); will-change:transform; z-index:2; pointer-events:none;"></div>

        <button id="order-type-dinein" class="order-type-btn" type="button" data-order-type="dine_in">Dine In</button>
        <button id="order-type-pickup" class="order-type-btn" type="button" data-order-type="pick_up">Pick Up</button>
        <button id="order-type-delivery" class="order-type-btn" type="button" data-order-type="delivery">Delivery</button>
      </div>
    </div>

    <!-- Cart Items Container -->
    <div id="order-items" style="flex:1 1 auto; overflow-y:auto; padding-right:6px; padding-bottom:20px;"></div>

    <!-- Footer / CTA (sticky to bottom) -->
    <div style="flex:0 0 auto; padding-top:12px; position:sticky; bottom:0; background:#ffffff;">
      <svg width="100%" height="1" viewBox="0 0 443 1" xmlns="http://www.w3.org/2000/svg" style="margin-bottom:12px;"><line y1="0.5" x2="443" y2="0.5" stroke="#E5E7EB"/></svg>

      <div style="margin-bottom:12px;">
        <p style="margin:0 0 4px 0; font-size:18px; font-weight:700; color:#111827;">No. of items: <span id="order-count">0</span></p>

        <p style="margin:0 0 4px 0; font-size:16px; color:#6b7280;">Delivery : Rs <span id="order-delivery" style="font-weight:700; color:#111827;">0</span></p>

        <p style="margin:0; font-size:20px; font-weight:800; color:#111827;">Total Price: Rs <span id="order-total" style="color:#111827; font-weight:900;">0</span></p>
      </div>

      <a
        id="checkout-cta"
        href="{% url 'menu:checkout' %}"
        role="button"
        style="
          display: inline-block;
          text-align: center;
          width: 100%;
          padding: 10px 0;
          border-radius: 9999px;
          color: #ffffff;
          font-size: 18px;
          font-weight: 600;
          text-decoration: none;
          background: linear-gradient(to right, #f65e00, #ff3737);
          box-shadow: 0 4px 8px rgba(0,0,0,0.12);
        "
      >
        Proceed to Checkout
      </a>
    </div>

  </div>
</div>
