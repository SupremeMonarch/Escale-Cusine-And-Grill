{% extends "base.html" %}
{% load static %}
{% block title %}Main Course | Escale{% endblock %}
{% block content %}

{% include "menu_sidebar.html" %}

<div class="w-full bg-white min-h-screen">
  <div class="max-w-7xl mx-auto px-6 py-8">

    <!-- Category Tabs -->
    <div class="flex justify-center items-center w-full max-w-2xl mx-auto mb-8">
      <div class="flex w-full rounded-full bg-white border border-[#969696] overflow-hidden shadow-md">
        <a href="{% url 'menu:menu_starters' %}" class="flex-1 flex justify-center items-center px-8 py-4 hover:bg-gray-50 rounded-full">
          <p class="text-lg font-medium text-black">Starters</p>
        </a>
        <a href="{% url 'menu:menu_main_course' %}" class="flex-1 flex justify-center items-center px-8 py-4 bg-gradient-to-r from-[#ff8e47] to-[#ff4747] rounded-full"
        style="background: linear-gradient(to right, #e97820, #ef4444) !important;"
        >
          <p class="text-lg font-medium text-white">Main Course</p>
        </a>
        <a href="{% url 'menu:menu_beverages' %}" class="flex-1 flex justify-center items-center px-8 py-4 hover:bg-gray-50 rounded-full">
          <p class="text-lg font-medium text-black">Beverages</p>
        </a>
      </div>
    </div>

    {# Loop through each section #}
    {% for section_title, items in sections.items %}
      <div class="mb-12">
        <div class="flex items-center gap-4 mb-6">
          <h2 class="text-2xl font-semibold text-[#ff4704]">{{ section_title }}</h2>
          <div class="flex-1 h-1 bg-[#E8DEF8] rounded"></div>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
          {% for item in items %}
            <div class="p-4">
              <div class="flex flex-col h-full bg-white rounded-lg overflow-hidden border border-gray-200 shadow-[0_4px_8px_rgba(0,0,0,0.12)] hover:shadow-[0_6px_16px_rgba(0,0,0,0.18)] hover:border-gray-300 transition-all duration-300 menu-card">
                
                {% if item.menu_img %}
                  <img src="{{ item.menu_img.url }}" alt="{{ item.name }}" class="w-full h-64 object-cover" />
                {% endif %}

                <div class="p-6 flex-1 flex flex-col">
                  <div class="flex justify-between items-start mb-3">
                    <p class="text-xl font-bold text-gray-900 menu-name">{{ item.name }}</p>
                    <p class="text-2xl font-bold text-amber-600 menu-price">Rs {{ item.price }}</p>
                  </div>

                  <p class="text-sm text-gray-600 mb-4 flex-1">{{ item.desc }}</p>

                    <button
                      class="order-now-btn mt-2"
                      data-item-id="{{ item.pk }}"
                      data-item-name="{{ item.name }}"
                      data-item-price="{{ item.price }}"
                      style="width: 100%; padding: 8px 16px; border-radius: 8px; border: none; color: #fff;
                            font-size: 16px; font-weight: 500; cursor: pointer;
                            background: linear-gradient(to right, #e97820, #ef4444);">
                      Add to Order
                  </button>
                </div>

              </div>
            </div>
          {% endfor %}
        </div>
      </div>
    {% endfor %}

  </div>
</div>

{% endblock %}

{% block scripts %}
  {{ block.super }}
  <script src="{% static 'js/sidebar.js' %}?v=20251129"></script>
{% endblock scripts %}